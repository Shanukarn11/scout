{% extends "base.html" %}
{% load static %}
{% block content %}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alex+Brush&display=swap" rel="stylesheet">

<style>
  body {
    background: #c5d8e6;
    font-family: helvetica, arial !important;
    text-transform: uppercase;
    box-sizing: border-box;
  }
  h1 { color: #000; font-weight: 200; font-size: 2.1em; margin: 0 !important; }
  h2 { color: rgb(165,150,150); font-weight: 100; font-size: 10px !important; margin: 0 0 2px !important; }
  h3 { color: #2c2f30; font-weight: 500; font-size: 12px; margin: 0 !important; }

  .cards_wrapper { background-color:#c5d8e6; }
  .card {
    width: 340px; max-width: 94vw;
    margin: 24px auto;
    background: #fff;
    border-radius: 20px;
    padding: 16px 16px 0 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.08);
    position: relative;
    overflow: hidden;
  }
  .card_heading { text-align:center; margin-bottom: 10px; }
  .card_trip { display:flex; justify-content:center; margin: 6px 0 10px; }
  .new_palyer_div { text-align:center; margin-bottom: 10px; }
  .name { font-size: 16px; font-weight: 700; color:#111; }
  .dob  { font-size: 12px; font-weight: 400; color:#444; margin-top:2px; }

  .card_divider { display:flex; align-items:center; margin: 8px 0; }
  .divider { flex: 1; height:1px; background: #e6e6e6; }
  .divider_hole { width:10px; height:10px; border-radius:50%; background:#c5d8e6; }

  .card_header { display:flex; justify-content:center; align-items:center; margin-top:6px; }
  .logo { display:block; margin: 10px auto; }

  .motto {
    font-style: normal; font-size: 22px; text-align: center; color: #187ec0;
    font-family: 'Alex Brush', cursive; background-color: #fff;
    border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;
    letter-spacing: 1px; text-transform: none !important; padding-bottom: 8px;
  }

  .btn.login-btn {
    background:#187ec0; color:#fff; border:0; padding:10px 20px; border-radius:8px;
  }
  .btn.login-btn:hover { filter: brightness(.95); }
</style>

<!-- Scout Pass -->
<div class="body-div" style="display:flex;flex-direction:column;align-items:center;">
  <div class="cards_wrapper" id="playerpass">
    <div class="card">
      <div class="card_heading">
        <h3 style="font-weight: 500;">IKF Scouting Level-2 Certification Enrollment Pass</h3>
      </div>

      <div class="card_trip">
        <img class="pic_file" alt="PROFILE PIC"
             src="{{ pic_file }}"
             style="width:150px; height:150px; border-radius:50%; border-color:black; padding:0;">
      </div>

      <div class="new_palyer_div" style="margin-bottom: 1em;">
        <div class="name" id="name">{{ name }}</div>
        <div class="dob" id="dob">{{ dob }}</div>
      </div>

      <div class="card_divider">
        <div class="divider_left divider_hole"></div>
        <div class="divider"></div>
        <div class="divider_right divider_hole"></div>
      </div>

      <div class="card_header">
        <img class="player_id_barcode" alt="BARCODE" src="{{ barcode_url }}" style="width: fit-content; height: fit-content; margin-top: 0;">
      </div>

      <img class="logo" src="{% static 'img/ikflogo.png' %}" style="height:60px;width:120px;justify-self:center;margin-bottom:.7em;" alt="IKF Logo" />

      <div class="motto">{{ aap_khelo_mauka_hum_denge }}</div>
    </div>
  </div>

  <!-- PRINT / DOWNLOAD BUTTON -->
  <div class="text-center col-lg-12 col-md-12 col-sm-12 mt-3">
    <div class="form-group mb-0">
      <button class="btn login-btn" id="download">Download</button>
    </div>
  </div>
</div>

<!-- Only used to export the pass as an image -->
<script src="{% static 'js/html2canvas.js' %}" type="text/javascript"></script>
<script>
  document.getElementById('download').addEventListener('click', function () {
    const node = document.getElementById('playerpass');
    if (!node) return;
    html2canvas(node, { allowTaint: true, useCORS: true }).then(function (canvas) {
      const a = document.createElement('a');
      a.download = 'ikf_level2_pass.jpg';
      a.href = canvas.toDataURL('image/jpeg', 0.95);
      a.click();
    });
  });
</script>

{% endblock %}
